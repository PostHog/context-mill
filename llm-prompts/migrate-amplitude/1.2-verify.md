---
title: Amplitude Migration - Verify
description: Verify the migration is complete and clean up Amplitude artifacts
---

After migrating all files, perform these verification and cleanup steps.

## Step 1: Verify No Remaining Amplitude Code

Search the codebase for any remaining Amplitude references:

```
grep -r "amplitude" --include="*.ts" --include="*.tsx" --include="*.js" --include="*.jsx"
grep -r "@amplitude" --include="*.ts" --include="*.tsx" --include="*.js" --include="*.jsx"
grep -r "ampli\." --include="*.ts" --include="*.tsx" --include="*.js" --include="*.jsx"
```

If any Amplitude code remains, return to the migrate step and address it.

## Step 2: Clean Up Ampli Directory

If the project used Ampli (Amplitude's generated SDK), delete the entire directory:

```bash
rm -rf src/ampli
rm -rf ampli
```

Remove any `ampli.json` configuration files as well.

## Step 3: Update Environment Variables

### Remove Amplitude Variables

Delete these from `.env`, `.env.local`, `.env.production`, etc.:
- `AMPLITUDE_API_KEY`
- `REACT_APP_AMPLITUDE_API_KEY`
- `NEXT_PUBLIC_AMPLITUDE_API_KEY`
- `VITE_AMPLITUDE_API_KEY`
- Any other `*AMPLITUDE*` variables

### Add PostHog Variables

Ensure these are present with appropriate prefix for the framework:

**Next.js (.env.local):**
```
NEXT_PUBLIC_POSTHOG_KEY=phc_your_key_here
NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com
```

**Vite (.env):**
```
VITE_PUBLIC_POSTHOG_KEY=phc_your_key_here
VITE_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com
```

**Create React App (.env):**
```
REACT_APP_POSTHOG_KEY=phc_your_key_here
REACT_APP_POSTHOG_HOST=https://us.i.posthog.com
```

## Step 4: Verify Package.json

Confirm that:
1. All Amplitude packages are removed from `dependencies` and `devDependencies`
2. `posthog-js` (or appropriate PostHog package) is installed

## Step 5: Run Type Check (if TypeScript)

If the project uses TypeScript, run the type checker to catch any migration issues:

```bash
npx tsc --noEmit
```

Fix any type errors related to the migration.

## Step 6: Run Linter

If the project has ESLint or similar configured:

```bash
npm run lint
```

Fix any linting errors, particularly unused imports from Amplitude.

## Step 7: Test the Application

Start the development server and verify:

1. **No console errors** related to Amplitude or PostHog
2. **PostHog initializes** - Check browser DevTools Network tab for requests to PostHog
3. **Events are captured** - Trigger some actions and verify they appear in PostHog

## Migration Summary

Delete the `.posthog-migration.json` planning file:

```bash
rm .posthog-migration.json
```

## Checklist

Before completing the migration, verify:

- [ ] All Amplitude imports removed
- [ ] All Amplitude tracking calls converted to PostHog
- [ ] All Amplitude identify calls converted to PostHog
- [ ] Ampli directory deleted (if applicable)
- [ ] Amplitude packages uninstalled
- [ ] Amplitude environment variables removed
- [ ] PostHog environment variables added
- [ ] PostHog package installed
- [ ] TypeScript compiles without errors (if applicable)
- [ ] No linting errors
- [ ] Application runs without console errors

## Status

Report these status updates as you work:

- [STATUS] Verifying no remaining Amplitude code
- [STATUS] Cleaning up Ampli directory
- [STATUS] Updating environment variables
- [STATUS] Running type check
- [STATUS] Running linter
- [STATUS] Migration complete
